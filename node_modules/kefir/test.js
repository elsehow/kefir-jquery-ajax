var Kefir = require('./dist/kefir.js');
var most = require('most');



var stream = Kefir.stream(function(em) {
  console.log('here we go ...');
  for (var i = 0; i < 100000; i++) {
    em.emit(i);
  }
});

var count = 0;
stream.map(add1).onValue(function sideEf(x) {
  count += x;
});



// var stream = most.create(function(add) {
//   console.log('here we go ...');
//   for (var i = 0; i < 100000; i++) {
//     add(i);
//   }
// });

// var count = 0;
// stream.map(add1).observe(function sideEf(x) {
//   count += x;
// });




setTimeout(function() {
  console.log(count);
}, 0);

function add1(x) {
  return x + 1;
}
