<script src="dist/kefir.js"></script>

<script>
var stream = Kefir.stream(function(em) {
  for (var i = 0; i < 100000000; i++) {
    process.nextTick(function() {
      em.emit(i);
    });
  }
});

function add1(x) {
  return x + 1;
}

var count = 0;
stream.map(add1).onValue(function sideEf(x) {
  count += x;
});

console.log(count);
</script>
